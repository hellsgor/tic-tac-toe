(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{329:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(5155);let a=(0,n(2115).memo)(e=>{let{size:t}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"100%",height:t||"100%",viewBox:"0 0 24 24",fill:"none",stroke:"#9acd32",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,r.jsx)("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"})]})});a.displayName="OIcon";let s=a},474:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(5155);let a=(0,n(2115).memo)(e=>{let{size:t}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"100%",height:t||"100%",viewBox:"0 0 24 24",fill:"none",stroke:"#9400d3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,r.jsx)("path",{d:"M18 6l-12 12"}),(0,r.jsx)("path",{d:"M6 6l12 12"})]})});a.displayName="XIcon";let s=a},768:(e,t,n)=>{"use strict";n.d(t,{default:()=>D});var r=n(5155),a=n(474),s=n(329),l=n(2115),i=n(2596);function o(e){let{children:t,className:n}=e;return(0,r.jsx)("div",{className:(0,i.A)("aspect-square size-9 overflow-hidden rounded-full bg-transparent text-white",n),children:t})}var c=n(6766),u=n(6678);let d=(0,l.memo)(function(e){let{imgSrc:t,userName:n,rate:a,className:s}=e;return(0,r.jsxs)("div",{className:(0,i.A)("flex items-center gap-x-3",s),children:[(0,r.jsx)(o,{className:"shrink-0 grow-0 basis-9",children:t?(0,r.jsx)(c.default,{src:t,alt:"user image",width:36,height:36,unoptimized:!0}):(0,r.jsx)(u.A,{className:"size-9 shrink-0 grow-0 basis-9 stroke-1"})}),(0,r.jsxs)("div",{className:"flex flex-col overflow-x-hidden",children:[(0,r.jsx)("span",{className:"truncate text-sm",children:n}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["Rate: ",a]})]})]})}),m=(0,l.memo)(function(e){let{userName:t,rate:n,imgSrc:a,icon:s}=e;return(0,r.jsxs)("div",{className:"relative flex items-center pl-1",children:[(0,r.jsx)(d,{userName:t,rate:n,imgSrc:a,className:"w-36"}),(0,r.jsx)("div",{className:"bg-dark-bg absolute -bottom-0 -left-0 flex size-4 items-center justify-center rounded-full p-0.5",children:s})]})});var x=n(7335);let h=(0,l.memo)(e=>{let{children:t,className:n,disabled:a,...s}=e,l=(0,i.A)(" rounded-lg border px-5 py-3 font-mono transition-colors",a?"bg-transparent border-gray-600 text-gray-600 cursor-not-allowed opacity-70":"bg-dark-bg cursor-pointer border-transparent hover:border-hover",n);return(0,r.jsx)("button",{className:l,disabled:a,...s,children:t})});var g=n(6840),f=n(5219),w=n(5695),j=n(8557);let v=(0,l.memo)(function(){let e=(0,w.useRouter)(),t=(0,x.jL)(),n=(0,x.GV)(e=>e.game.winner),a=(0,x.GV)(e=>e.game.draw),{toggleTimer:s,enabled:o,countDown:c}=(0,f.L)({initialTime:j.eh.newGameAfterEnd,updateInterval:1e3,resetDelay:200}),u=(0,l.useCallback)(function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t((0,g.cL)()),o&&s(),n&&e.push("/")},[t,e,o]);return(0,l.useEffect)(()=>{(n||a)&&!o&&s()},[n,a]),(0,l.useEffect)(()=>{(n||a)&&c<=0&&u(!0)},[n,a,c,u]),(0,r.jsxs)("div",{className:(0,i.A)("flex items-center gap-x-5 transition-opacity","opacity-".concat(n||a?1:0),"pointer-events-".concat(n||a?"auto":"none")),children:[(0,r.jsx)(h,{onClick:()=>{u()},className:"w-full",children:"Play again"}),(0,r.jsxs)(h,{className:"w-full",onClick:()=>u(!0),children:["New game (",String(c).padStart(2,"0"),")"]})]})});function p(e){let{children:t}=e;return(0,r.jsx)("p",{className:"flex items-center gap-x-1 text-sm",children:t})}var b=n(8354);let y=(0,l.memo)(function(){let e=(0,x.GV)(e=>e.game.draw),t=(0,x.GV)(e=>e.game.win),n=(0,x.GV)(e=>e.game.winner),l=(0,x.GV)(e=>e.game.currentPlayer);return e?(0,r.jsx)("span",{children:"Draw!"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"Player"}),(0,r.jsx)("span",{className:"inline-block size-5",children:(n||l)===b.G.X?(0,r.jsx)(a.A,{}):(0,r.jsx)(s.A,{})}),(0,r.jsx)("span",{children:t?" won!":" move"})]})});var N=n(6759);function G(e){let{duration:t}=e,n=(0,N.U)(t);return(0,r.jsx)("span",{className:"transition-colors",style:{color:n.color},children:"".concat(n.minutes,":").concat(n.seconds)})}let A=()=>{let e=(0,x.GV)(e=>e.game.move);return(0,r.jsxs)("div",{className:"flex w-40 flex-col items-center justify-center",children:[(0,r.jsx)(p,{children:(0,r.jsxs)("span",{children:["Move #",e]})}),(0,r.jsx)(p,{children:(0,r.jsx)(y,{})}),(0,r.jsx)(p,{children:(0,r.jsx)(G,{duration:j.eh.move})})]})},k=(0,l.memo)(function(e){let{children:t,justify:n}=e;return(0,r.jsx)("div",{className:(0,i.A)("bg-asphalt flex items-center gap-x-12 rounded-lg p-4 shadow-2xl",n?"justify".concat(n):null),children:t})}),V="/tic-tac-toe",C=[{userName:"Henry",rate:1234,imgSrc:"".concat(V,"/images/userExample1.webp"),icon:(0,r.jsx)(a.A,{})},{userName:"Sophie",rate:1234,imgSrc:"".concat(V,"/images/userExample2.webp"),icon:(0,r.jsx)(s.A,{})}];function D(){return(0,r.jsxs)("div",{className:"flex flex-col justify-between gap-y-5",children:[(0,r.jsxs)(k,{justify:"center",children:[(0,r.jsx)(m,{...C[0]}),(0,r.jsx)(A,{}),(0,r.jsx)(m,{...C[1]})]}),(0,r.jsx)(v,{})]})}},4385:(e,t,n)=>{"use strict";n.d(t,{default:()=>j});var r=n(5155),a=n(7335),s=n(8354),l=n(329),i=n(474),o=n(2596),c=n(2115);let u=(0,c.memo)(function(e){let{size:t,value:n}=e,c=(0,a.GV)(e=>e.game.currentPlayer),u=n?n===s.G.X?i.A:l.A:c===s.G.X?i.A:l.A;return n?(0,r.jsx)(u,{size:t}):(0,r.jsx)("div",{className:(0,o.A)("flex items-center justify-center opacity-0 grayscale transition-opacity",c===s.G.X?"hover:opacity-100":"hover:opacity-10"),children:(0,r.jsx)(u,{size:t})})}),d=(e,t)=>(0,o.A)("border-none flex justify-center items-center transition-[background-color]",e?"cursor-default":"cursor-pointer",t?e===s.G.X?"bg-(--color-x-win-bg)":"bg-(--color-o-win-bg)":"bg-[#242424]");var m=n(8924);let x=e=>(0,m.Mz)([e=>e.game.cells],t=>t[e]);var h=n(6840),g=n(8557);let f=()=>(e,t)=>{let n=t().game.cells,r=t().game.move,a=t().game.techWin,s=t().game.cellsCount,l=t().game.currentPlayer;if(a||r<=4)return;let i=g.MO.find(e=>{let t=n[e[0]];return!!t&&e.every(e=>n[e]===t)})||[];i.length&&(console.log("winner:",l),e((0,h._B)({winCombination:i,winner:l}))),r>=s&&!i.length&&e((0,h.Db)())};function w(e){let{index:t,isWin:n}=e,s=(0,a.GV)(x(t)),l=function(){let e=(0,a.jL)(),t=(0,a.GV)(e=>e.game.currentPlayer);return(0,c.useCallback)(n=>{e((e,r)=>{e((0,h.jO)({index:n,symbol:t})),e(f());let a=r().game.win,s=r().game.draw;a||s||(e((0,h.Hq)()),e((0,h.tv)()))})},[e,t])}();return(0,r.jsx)("button",{className:d(s,n),onClick:()=>l(t),disabled:!!s,children:(0,r.jsx)(u,{value:s,size:"70%"})})}function j(){let e=(0,a.GV)(e=>e.game.win),t=(0,a.GV)(e=>e.game.techWin),n=(0,a.GV)(e=>e.game.winCombination),s=(0,a.GV)(e=>e.game.cellsCount),l=(0,c.useMemo)(()=>Array(s).fill(null),[s]),i=(0,o.A)("grid aspect-square w-100 grid-cols-3 grid-rows-3 gap-0.25 bg-[#434343]",e||t?"pointer-events-none":null);return(0,r.jsx)("div",{className:i,children:l.map((e,t)=>(0,r.jsx)(w,{index:t,isWin:n.includes(t)},t))})}n(6759)},5219:(e,t,n)=>{"use strict";n.d(t,{j:()=>a,L:()=>s});var r=n(2115),a=function(e){return e.START="start",e.END="end",e}({});function s(e){let{updateInterval:t=1e3,initialTime:n,isResetAfterEnd:a=!1,resetDelay:s=0}=e,[l,i]=(0,r.useState)(),[o,c]=(0,r.useState)(!1),u=function(e,t,n){let a=(0,r.useRef)(n);a.current=n;let[s,l]=(0,r.useState)(Date.now());return(0,r.useLayoutEffect)(()=>{var n;if(!t)return;l(Date.now()),null===(n=a.current)||void 0===n||n.call(a,Date.now());let r=setInterval(()=>{var e;l(Date.now()),null===(e=a.current)||void 0===e||e.call(a,Date.now())},e);return()=>{clearInterval(r)}},[e,t]),s}(t,!!l&&!o,e=>{l&&a&&n-(e-l)<0&&i(void 0)}),d=l?u-l:0,m=o?0:Math.max(n-d,0);return{toggleTimer:e=>{if("end"===e){i(void 0),c(!0);return}if("start"===e){i(Date.now()),c(!1);return}l?s?setTimeout(()=>{i(void 0)},s):i(void 0):i(Date.now())},enabled:!!l&&!o,timer:Math.round(d/t),countDown:Math.round(m/t)}}},6759:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var r=n(7335),a=n(2115),s=n(6840),l=n(8557),i=n(5219);let o=e=>{let t=(0,r.GV)(e=>e.game.currentPlayer),n=(0,r.GV)(e=>e.game.win),o=(0,r.GV)(e=>e.game.techWin),c=(0,r.GV)(e=>e.game.draw),u=(0,r.jL)(),{toggleTimer:d,countDown:m,enabled:x}=(0,i.L)({initialTime:e});return(0,a.useEffect)(()=>{n||c||o||d(i.j.START),(n||c||o)&&x&&d(i.j.END)},[t,n,c,o]),(0,a.useEffect)(()=>{!(m<=0)||(d(i.j.END),n||c||o||u((0,s.bS)()))},[u,m]),{color:function(e,t,n){if(n)return"rgb(".concat(l.xj.red[0],", ").concat(l.xj.green[0],", ").concat(l.xj.blue[0],")");let r=e>=t/2?1:e<=t/6?0:(t/2-e)/(t/2),a=function(n){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e>=t/2?l.xj[n][0]:e<=t/6?l.xj[n][1]:Math.round(l.xj[n][0]*(a?1-r:1+r))},s=a("red",!1),i=a("green"),o=a("blue");return"rgb(".concat(s,", ").concat(i,", ").concat(o,")")}(1e3*m,e,n||c),minutes:"".concat(Math.floor(m/60)).padStart(2,"0"),seconds:"".concat(m%60).padStart(2,"0")}}},6840:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>h,Db:()=>m,Hq:()=>o,_B:()=>d,bS:()=>u,cL:()=>x,jO:()=>i,tv:()=>c});var r=n(8354),a=n(6439);let s={cells:Array(9).fill(null),currentPlayer:r.G.X,move:1,draw:!1,win:!1,winCombination:[],techWin:!1,winner:null,cellsCount:9},l=(0,a.Z0)({name:"game",initialState:s,reducers:{setSymbol:(e,t)=>{e.cells[t.payload.index]=t.payload.symbol},changeCurrentPlayer:e=>{e.currentPlayer=e.currentPlayer===r.G.O?r.G.X:r.G.O},incrementMove:e=>{e.move+=1},setTechWin:e=>{e.techWin=!0,e.win=!0,e.winner=e.currentPlayer===r.G.X?r.G.O:r.G.X},setWinCombination:(e,t)=>{e.winCombination=t.payload.winCombination,e.win=!0,e.winner=t.payload.winner},setDraw:e=>{e.draw=!0},reset:e=>{e.cells=s.cells,e.currentPlayer=s.currentPlayer,e.move=s.move,e.draw=s.draw,e.win=s.win,e.winCombination=s.winCombination,e.techWin=s.techWin,e.winner=s.winner}}}),{setSymbol:i,changeCurrentPlayer:o,incrementMove:c,setTechWin:u,setWinCombination:d,setDraw:m,reset:x}=l.actions,h=l.reducer},7335:(e,t,n)=>{"use strict";n.d(t,{GV:()=>s,jL:()=>a});var r=n(4540);let a=()=>(0,r.wA)(),s=r.d4},8354:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});var r=function(e){return e.X="x",e.O="o",e}({})},8557:(e,t,n)=>{"use strict";n.d(t,{eh:()=>s,xj:()=>a,MO:()=>r});let r=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],a={red:[154,255],green:[205,0],blue:[50,0]},s={move:1e4,newGameAfterEnd:1e4}},9589:(e,t,n)=>{Promise.resolve().then(n.bind(n,4385)),Promise.resolve().then(n.bind(n,768))}},e=>{var t=t=>e(e.s=t);e.O(0,[832,21,441,684,358],()=>t(9589)),_N_E=e.O()}]);