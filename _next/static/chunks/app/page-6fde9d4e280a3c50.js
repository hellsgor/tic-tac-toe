(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{329:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(5155);let a=(0,t(2115).memo)(e=>{let{size:n}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:n||"100%",height:n||"100%",viewBox:"0 0 24 24",fill:"none",stroke:"#9acd32",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,r.jsx)("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"})]})});a.displayName="OIcon";let s=a},474:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(5155);let a=(0,t(2115).memo)(e=>{let{size:n}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:n||"100%",height:n||"100%",viewBox:"0 0 24 24",fill:"none",stroke:"#9400d3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,r.jsx)("path",{d:"M18 6l-12 12"}),(0,r.jsx)("path",{d:"M6 6l12 12"})]})});a.displayName="XIcon";let s=a},1934:(e,n,t)=>{"use strict";t.d(n,{default:()=>C});var r=t(5155),a=t(474),s=t(329),l=t(2115),i=t(2596);function o(e){let{children:n,className:t}=e;return(0,r.jsx)("div",{className:(0,i.A)("aspect-square size-9 overflow-hidden rounded-full bg-transparent text-white",t),children:n})}var c=t(6766),u=t(6678);let d=(0,l.memo)(function(e){let{imgSrc:n,userName:t,rate:a,className:s}=e;return(0,r.jsxs)("div",{className:(0,i.A)("flex items-center gap-x-3",s),children:[(0,r.jsx)(o,{className:"shrink-0 grow-0 basis-9",children:n?(0,r.jsx)(c.default,{src:n,alt:"user image",width:36,height:36,unoptimized:!0}):(0,r.jsx)(u.A,{className:"size-9 shrink-0 grow-0 basis-9 stroke-1"})}),(0,r.jsxs)("div",{className:"flex flex-col overflow-x-hidden",children:[(0,r.jsx)("span",{className:"truncate text-sm",children:t}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["Rate: ",a]})]})]})}),m=(0,l.memo)(function(e){let{userName:n,rate:t,imgSrc:a,icon:s}=e;return(0,r.jsxs)("div",{className:"relative flex items-center pl-1",children:[(0,r.jsx)(d,{userName:n,rate:t,imgSrc:a,className:"w-36"}),(0,r.jsx)("div",{className:"bg-dark-bg absolute -bottom-0 -left-0 flex size-4 items-center justify-center rounded-full p-0.5",children:s})]})});var x=t(7335);let h=(0,l.memo)(e=>{let{children:n,className:t,disabled:a,...s}=e,l=(0,i.A)(" rounded-lg border px-5 py-3 font-mono transition-colors",a?"bg-transparent border-gray-600 text-gray-600 cursor-not-allowed opacity-70":"bg-dark-bg cursor-pointer border-transparent hover:border-hover",t);return(0,r.jsx)("button",{className:l,disabled:a,...s,children:n})});var g=t(6840),f=t(5219),w=t(5695),j=t(8557);let v=(0,l.memo)(function(){let e=(0,w.useRouter)(),n=(0,x.jL)(),t=(0,x.GV)(e=>e.game.winner),a=(0,x.GV)(e=>e.game.draw),{toggleTimer:s,enabled:o,countDown:c}=(0,f.L)({initialTime:j.eh.newGameAfterEnd,updateInterval:1e3,resetDelay:200}),u=(0,l.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n((0,g.cL)()),o&&s(),t&&e.push("/")},[n,e,o]);return(0,l.useEffect)(()=>{(t||a)&&!o&&s()},[t,a]),(0,l.useEffect)(()=>{(t||a)&&c<=0&&u(!0)},[t,a,c,u]),(0,r.jsxs)("div",{className:(0,i.A)("flex items-center gap-x-5 transition-opacity","opacity-".concat(t||a?1:0),"pointer-events-".concat(t||a?"auto":"none")),children:[(0,r.jsx)(h,{onClick:()=>{u()},className:"w-full",children:"Play again"}),(0,r.jsxs)(h,{className:"w-full",onClick:()=>u(!0),children:["New game (",String(c).padStart(2,"0"),")"]})]})});function p(e){let{children:n}=e;return(0,r.jsx)("p",{className:"flex items-center gap-x-1 text-sm",children:n})}var b=t(8354);let y=(0,l.memo)(function(){let e=(0,x.GV)(e=>e.game.draw),n=(0,x.GV)(e=>e.game.win),t=(0,x.GV)(e=>e.game.winner),l=(0,x.GV)(e=>e.game.currentPlayer);return e?(0,r.jsx)("span",{children:"Draw!"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"Player"}),(0,r.jsx)("span",{className:"inline-block size-5",children:(t||l)===b.G.X?(0,r.jsx)(a.A,{}):(0,r.jsx)(s.A,{})}),(0,r.jsx)("span",{children:n?" won!":" move"})]})});var N=t(6759);function G(e){let{duration:n}=e,t=(0,N.U)(n);return(0,r.jsx)("span",{className:"transition-colors",style:{color:t.color},children:"".concat(t.minutes,":").concat(t.seconds)})}let A=()=>{let e=(0,x.GV)(e=>e.game.move);return(0,r.jsxs)("div",{className:"flex w-40 flex-col items-center justify-center",children:[(0,r.jsx)(p,{children:(0,r.jsxs)("span",{children:["Move #",e]})}),(0,r.jsx)(p,{children:(0,r.jsx)(y,{})}),(0,r.jsx)(p,{children:(0,r.jsx)(G,{duration:j.eh.move})})]})},k=(0,l.memo)(function(e){let{children:n,justify:t}=e;return(0,r.jsx)("div",{className:(0,i.A)("bg-asphalt flex items-center gap-x-12 rounded-lg p-4 shadow-2xl",t?"justify".concat(t):null),children:n})}),V=[{userName:"Henry",rate:1234,imgSrc:"/images/userExample1.webp",icon:(0,r.jsx)(a.A,{})},{userName:"Sophie",rate:1234,imgSrc:"/images/userExample2.webp",icon:(0,r.jsx)(s.A,{})}];function C(){return(0,r.jsxs)("div",{className:"flex flex-col justify-between gap-y-5",children:[(0,r.jsxs)(k,{justify:"center",children:[(0,r.jsx)(m,{...V[0]}),(0,r.jsx)(A,{}),(0,r.jsx)(m,{...V[1]})]}),(0,r.jsx)(v,{})]})}},4385:(e,n,t)=>{"use strict";t.d(n,{default:()=>j});var r=t(5155),a=t(7335),s=t(8354),l=t(329),i=t(474),o=t(2596),c=t(2115);let u=(0,c.memo)(function(e){let{size:n,value:t}=e,c=(0,a.GV)(e=>e.game.currentPlayer),u=t?t===s.G.X?i.A:l.A:c===s.G.X?i.A:l.A;return t?(0,r.jsx)(u,{size:n}):(0,r.jsx)("div",{className:(0,o.A)("flex items-center justify-center opacity-0 grayscale transition-opacity",c===s.G.X?"hover:opacity-100":"hover:opacity-10"),children:(0,r.jsx)(u,{size:n})})}),d=(e,n)=>(0,o.A)("border-none flex justify-center items-center transition-[background-color]",e?"cursor-default":"cursor-pointer",n?e===s.G.X?"bg-(--color-x-win-bg)":"bg-(--color-o-win-bg)":"bg-[#242424]");var m=t(8924);let x=e=>(0,m.Mz)([e=>e.game.cells],n=>n[e]);var h=t(6840),g=t(8557);let f=()=>(e,n)=>{let t=n().game.cells,r=n().game.move,a=n().game.techWin,s=n().game.cellsCount,l=n().game.currentPlayer;if(a||r<=4)return;let i=g.MO.find(e=>{let n=t[e[0]];return!!n&&e.every(e=>t[e]===n)})||[];i.length&&(console.log("winner:",l),e((0,h._B)({winCombination:i,winner:l}))),r>=s&&!i.length&&e((0,h.Db)())};function w(e){let{index:n,isWin:t}=e,s=(0,a.GV)(x(n)),l=function(){let e=(0,a.jL)(),n=(0,a.GV)(e=>e.game.currentPlayer);return(0,c.useCallback)(t=>{e((e,r)=>{e((0,h.jO)({index:t,symbol:n})),e(f());let a=r().game.win,s=r().game.draw;a||s||(e((0,h.Hq)()),e((0,h.tv)()))})},[e,n])}();return(0,r.jsx)("button",{className:d(s,t),onClick:()=>l(n),disabled:!!s,children:(0,r.jsx)(u,{value:s,size:"70%"})})}function j(){let e=(0,a.GV)(e=>e.game.win),n=(0,a.GV)(e=>e.game.techWin),t=(0,a.GV)(e=>e.game.winCombination),s=(0,a.GV)(e=>e.game.cellsCount),l=(0,c.useMemo)(()=>Array(s).fill(null),[s]),i=(0,o.A)("grid aspect-square w-100 grid-cols-3 grid-rows-3 gap-0.25 bg-[#434343]",e||n?"pointer-events-none":null);return(0,r.jsx)("div",{className:i,children:l.map((e,n)=>(0,r.jsx)(w,{index:n,isWin:t.includes(n)},n))})}t(6759)},5219:(e,n,t)=>{"use strict";t.d(n,{j:()=>a,L:()=>s});var r=t(2115),a=function(e){return e.START="start",e.END="end",e}({});function s(e){let{updateInterval:n=1e3,initialTime:t,isResetAfterEnd:a=!1,resetDelay:s=0}=e,[l,i]=(0,r.useState)(),[o,c]=(0,r.useState)(!1),u=function(e,n,t){let a=(0,r.useRef)(t);a.current=t;let[s,l]=(0,r.useState)(Date.now());return(0,r.useLayoutEffect)(()=>{var t;if(!n)return;l(Date.now()),null===(t=a.current)||void 0===t||t.call(a,Date.now());let r=setInterval(()=>{var e;l(Date.now()),null===(e=a.current)||void 0===e||e.call(a,Date.now())},e);return()=>{clearInterval(r)}},[e,n]),s}(n,!!l&&!o,e=>{l&&a&&t-(e-l)<0&&i(void 0)}),d=l?u-l:0,m=o?0:Math.max(t-d,0);return{toggleTimer:e=>{if("end"===e){i(void 0),c(!0);return}if("start"===e){i(Date.now()),c(!1);return}l?s?setTimeout(()=>{i(void 0)},s):i(void 0):i(Date.now())},enabled:!!l&&!o,timer:Math.round(d/n),countDown:Math.round(m/n)}}},6759:(e,n,t)=>{"use strict";t.d(n,{U:()=>o});var r=t(7335),a=t(2115),s=t(6840),l=t(8557),i=t(5219);let o=e=>{let n=(0,r.GV)(e=>e.game.currentPlayer),t=(0,r.GV)(e=>e.game.win),o=(0,r.GV)(e=>e.game.techWin),c=(0,r.GV)(e=>e.game.draw),u=(0,r.jL)(),{toggleTimer:d,countDown:m,enabled:x}=(0,i.L)({initialTime:e});return(0,a.useEffect)(()=>{t||c||o||d(i.j.START),(t||c||o)&&x&&d(i.j.END)},[n,t,c,o]),(0,a.useEffect)(()=>{!(m<=0)||(d(i.j.END),t||c||o||u((0,s.bS)()))},[u,m]),{color:function(e,n,t){if(t)return"rgb(".concat(l.xj.red[0],", ").concat(l.xj.green[0],", ").concat(l.xj.blue[0],")");let r=e>=n/2?1:e<=n/6?0:(n/2-e)/(n/2),a=function(t){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e>=n/2?l.xj[t][0]:e<=n/6?l.xj[t][1]:Math.round(l.xj[t][0]*(a?1-r:1+r))},s=a("red",!1),i=a("green"),o=a("blue");return"rgb(".concat(s,", ").concat(i,", ").concat(o,")")}(1e3*m,e,t||c),minutes:"".concat(Math.floor(m/60)).padStart(2,"0"),seconds:"".concat(m%60).padStart(2,"0")}}},6840:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>h,Db:()=>m,Hq:()=>o,_B:()=>d,bS:()=>u,cL:()=>x,jO:()=>i,tv:()=>c});var r=t(8354),a=t(6439);let s={cells:Array(9).fill(null),currentPlayer:r.G.X,move:1,draw:!1,win:!1,winCombination:[],techWin:!1,winner:null,cellsCount:9},l=(0,a.Z0)({name:"game",initialState:s,reducers:{setSymbol:(e,n)=>{e.cells[n.payload.index]=n.payload.symbol},changeCurrentPlayer:e=>{e.currentPlayer=e.currentPlayer===r.G.O?r.G.X:r.G.O},incrementMove:e=>{e.move+=1},setTechWin:e=>{e.techWin=!0,e.win=!0,e.winner=e.currentPlayer===r.G.X?r.G.O:r.G.X},setWinCombination:(e,n)=>{e.winCombination=n.payload.winCombination,e.win=!0,e.winner=n.payload.winner},setDraw:e=>{e.draw=!0},reset:e=>{e.cells=s.cells,e.currentPlayer=s.currentPlayer,e.move=s.move,e.draw=s.draw,e.win=s.win,e.winCombination=s.winCombination,e.techWin=s.techWin,e.winner=s.winner}}}),{setSymbol:i,changeCurrentPlayer:o,incrementMove:c,setTechWin:u,setWinCombination:d,setDraw:m,reset:x}=l.actions,h=l.reducer},7335:(e,n,t)=>{"use strict";t.d(n,{GV:()=>s,jL:()=>a});var r=t(4540);let a=()=>(0,r.wA)(),s=r.d4},8354:(e,n,t)=>{"use strict";t.d(n,{G:()=>r});var r=function(e){return e.X="x",e.O="o",e}({})},8557:(e,n,t)=>{"use strict";t.d(n,{eh:()=>s,xj:()=>a,MO:()=>r});let r=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],a={red:[154,255],green:[205,0],blue:[50,0]},s={move:1e4,newGameAfterEnd:1e4}},9589:(e,n,t)=>{Promise.resolve().then(t.bind(t,4385)),Promise.resolve().then(t.bind(t,1934))}},e=>{var n=n=>e(e.s=n);e.O(0,[832,21,441,684,358],()=>n(9589)),_N_E=e.O()}]);